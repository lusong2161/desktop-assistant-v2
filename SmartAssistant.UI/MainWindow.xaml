<Window x:Class="SmartAssistant.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:SmartAssistant.UI.ViewModels"
        Title="智能桌面助手" Height="450" Width="300"
        WindowStyle="None" 
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="{Binding IsTopMost}"
        Opacity="{Binding Opacity}">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <Border Background="#F2FFFFFF" 
            CornerRadius="10" 
            BorderBrush="#FF0078D7" 
            BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Background="#FF0078D7" 
                    CornerRadius="10,10,0,0" 
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="智能桌面助手" 
                             Foreground="White" 
                             VerticalAlignment="Center" 
                             Margin="10,0,0,0"/>
                    <StackPanel Orientation="Horizontal" 
                              HorizontalAlignment="Right">
                        <ToggleButton Content="📌" 
                                    IsChecked="{Binding IsTopMost}"
                                    Style="{StaticResource TitleBarButtonStyle}"
                                    ToolTip="固定窗口"/>
                        <Button Content="—" 
                                Click="MinimizeButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}"/>
                        <Button Content="×" 
                                Click="CloseButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Grid.Row="1" Margin="10">
                <StackPanel>
                    <TextBlock Text="欢迎使用智能桌面助手" 
                             HorizontalAlignment="Center" 
                             Margin="0,10"/>
                    <TextBox x:Name="CommandInput"
                            Margin="5"
                            Height="30"
                            KeyDown="CommandInput_KeyDown"
                            PlaceholderText="输入命令..."/>
                    <TextBlock x:Name="ResponseText"
                             Margin="5"
                             TextWrapping="Wrap"
                             MinHeight="100"/>
                    <Slider Value="{Binding Opacity}"
                           Minimum="0.3"
                           Maximum="1.0"
                           TickFrequency="0.1"
                           TickPlacement="BottomRight"
                           Margin="5"
                           ToolTip="调整透明度"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
